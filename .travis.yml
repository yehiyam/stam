sudo: required
language: node_js
node_js:
- '10'
services:
- docker
- redis-server
branches:
  only:
  - master
before_install: ./scripts/beforeInstall.sh
install:
- npm i
- export CHANGED=$(lerna changed)
- echo ${CHANGED}
- lerna bootstrap
script:
- echo ${CHANGED}
- ./scripts/test.sh
- ./scripts/createVersion.sh
- ./scripts/build.sh
- ./scripts/trigger.sh
# deploy:
#   skip_cleanup: true
#   provider: script
#   script: PRIVATE_REGISTRY=docker.io/hkube npm run build
#   on:
#     branch: master
